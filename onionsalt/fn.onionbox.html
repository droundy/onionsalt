<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `onionbox` fn in crate `onionsalt`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, onionbox">

    <title>onionsalt::onionbox - Rust</title>

    <link rel="stylesheet" type="text/css" href="../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <section class="sidebar">
        
        <p class='location'><a href='index.html'>onionsalt</a></p><script>window.sidebarCurrent = {name: 'onionbox', ty: 'fn', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </section>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content fn">
<h1 class='fqn'><span class='in-band'>Function <a href='index.html'>onionsalt</a>::<wbr><a class='fn' href=''>onionbox</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-19399' class='srclink' href='../src/onionsalt/lib.rs.html#320-338' title='goto source code'>[src]</a></span></h1>
<pre class='rust fn'>pub fn onionbox(keys_and_routings: <a href='http://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a href='http://doc.rust-lang.org/nightly/std/primitive.tuple.html'>(<a class='struct' href='../onionsalt/crypto/struct.PublicKey.html' title='onionsalt::crypto::PublicKey'>PublicKey</a>, <a href='http://doc.rust-lang.org/nightly/std/primitive.array.html'>[<a href='http://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a>; ROUTING_LENGTH]</a>)</a><a href='http://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>, payload_recipient: <a href='http://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>) -&gt; <a class='enum' href='http://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='struct' href='../onionsalt/struct.OnionBox.html' title='onionsalt::OnionBox'>OnionBox</a>, <a class='enum' href='../onionsalt/crypto/enum.NaClError.html' title='onionsalt::crypto::NaClError'>NaClError</a>&gt;</pre><div class='docblock'><p>Encrypt a message in an onion defined by <code>keys_and_routings</code>, with
<code>payload</code> directed to <code>payload_recipient</code>.</p>

<p><code>keys_and_routings</code> is the sequence of public keys owned by
recipients, and the routing information that said recipient should
use, presumably to send the message to the next recipient.  There
can be up to <code>ROUTE_COUNT</code> elements in this slice.  The final
address should be our own, if a return message is desired.  The
routing information should indicate to the payload recipient
(whose index in the slice is <code>payload_recipient</code>) what to do with
the payload.</p>

<h1 id="security-properties" class='section-header'><a
                           href="#security-properties">Security properties</a></h1>
<p>No recipient (not possessing the secret keys of any other
recipient) by examining the packet received should be able to
determine any information other than the plaintext contents of the
routing information (except for the payload recipient, who should
also be able to read the plaintext payload.  Similarly, each
recipient can be confident that the routing information has not
been tampered with, although it could have been replaced in its
entirety with other routing information.</p>

<p>The recipient of the message payload may ensure that the payload
originated from the sender (or someone with the sender&#39;s secret
key), although the recipient cannot prove this to anyone else.</p>

<p>Things to keep in mind:</p>

<ol>
<li><p>There is no protection against tampering with the payload until
the payload is received by the recipient.  Thus the recipient
must take particular care not to reveal anything by its
response to the payload.</p></li>
<li><p>No recipient can in any way determine (from the message
received) her place in the series of routing.</p></li>
</ol>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <div id="help" class="hidden">
        <div>
            <div class="shortcuts">
                <h1>Keyboard Shortcuts</h1>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                </dl>
            </div>

            <div class="infos">
                <h1>Search Tricks</h1>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>typedef</code> (or
                    <code>tdef</code>).
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code>)
                </p>
            </div>
        </div>
    </div>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "onionsalt";
        window.playgroundUrl = "";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    
    <script async src="../search-index.js"></script>
</body>
</html>